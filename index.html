<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reticulate wrapper on 'boto3' with convenient helper functions • botor</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Reticulate wrapper on 'boto3' with convenient helper functions">
<meta property="og:description" content="Provides access to the 'Amazon Web Services' ('AWS') 'SDK' via the 'boto3' Python module.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">botor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/daroczig/botor">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<div id="botor-reticulate-wrapper-on-boto3" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#botor-reticulate-wrapper-on-boto3" class="anchor"></a>botor: Reticulate wrapper on ‘boto3’</h1></div>
<p><a href="https://travis-ci.org/daroczig/botor"><img src="https://travis-ci.org/daroczig/botor.svg?branch=master" alt="Build Status"></a> <a href="https://www.repostatus.org/#wip"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a> <img src="https://img.shields.io/maintenance/yes/2019.svg" alt="Active development in 2018-2019"></p>
<p>This R package provides access to the ‘Amazon Web Services’ (‘AWS’) ‘SDK’ via the ‘boto3’ Python module and some convenient helper functions and workarounds, eg taking care of spawning new resources in forked R processes.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><code>botor</code> is not on CRAN yet, please install from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">'daroczig/botor'</span>)</a></code></pre></div>
</div>
<div id="loading-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#loading-the-package" class="anchor"></a>Loading the package</h2>
<p>Loading the <code>botor</code> package might take a while as it will also <code>import</code> the <code>boto3</code> Python module in the background:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.time">system.time</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(botor))</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt;    user  system elapsed </span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt;   1.131   0.250   1.191</span></a></code></pre></div>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<p>Quick examples:</p>
<ol>
<li>
<p>Check the currently used AWS user’s name:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="reference/iam_whoami.html">iam_whoami</a></span>()</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; [1] "gergely-dev"</span></a></code></pre></div>
</li>
<li>
<p>Read a <code>csv</code> file stored in S3 using a helper function:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="reference/s3_read.html">s3_read</a></span>(<span class="st">'s3://botor/example-data/mtcars.csv'</span>, read.csv)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt;     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; 1  21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; 2  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; ...</span></a></code></pre></div>
</li>
<li>
<p>Encrypt a string via KMS using a helper function:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="reference/kms_encrypt.html">kms_encrypt</a></span>(<span class="st">'alias/key'</span>, <span class="st">'secret'</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; [1] "QWERTY..."</span></a></code></pre></div>
</li>
<li>
<p>Get more info on the currently used AWS user calling the IAM client directly:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="reference/iam.html">iam</a></span>()<span class="op">$</span><span class="kw">get_user</span>()</a></code></pre></div>
</li>
<li>
<p>Create a new client to a service without helper functions:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">ec2 &lt;-<span class="st"> </span><span class="kw"><a href="reference/botor_client.html">botor_client</a></span>(<span class="st">'ec2'</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">ec2<span class="op">$</span><span class="kw">describe_vpcs</span>()</a></code></pre></div>
</li>
</ol>
</div>
<div id="aws-auth" class="section level2">
<h2 class="hasAnchor">
<a href="#aws-auth" class="anchor"></a>AWS Auth</h2>
<p>The <code>botor</code> package by default will use the credentials and related options set in <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html#configuration">environmental variables</a> or in the <code>~/.aws/config</code> and <code>~/.aws/credentials</code> files. If you need to specify a custom profile or AWS region etc, there are various options with different complexity and flexibility:</p>
<ul>
<li>set the related environment variable(s) before loading <code>botor</code>
</li>
<li>call the <code><a href="reference/botor.html">botor()</a></code> function with the relevant argument to set the config of the default session for the <code>botor</code> helper functions, eg</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="reference/botor.html">botor</a></span>(<span class="dt">region_name =</span> <span class="st">'eu-west-42'</span>)</a></code></pre></div>
<ul>
<li>if you need to manage multiple sessions, then use the raw <code>boto3</code> object from the <code>botor</code> package and <code>boto3.session.Session</code> to init these custom sessions and the required clients/resources on the top of those, eg</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">my_custom_session1 &lt;-<span class="st"> </span>boto3<span class="op">$</span><span class="kw">Session</span>(<span class="dt">region_name =</span> <span class="st">'us-west-1'</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">my_custom_s3_client1 &lt;-<span class="st"> </span>my_custom_session1<span class="op">$</span><span class="kw">client</span>(<span class="st">'s3'</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">my_custom_session2 &lt;-<span class="st"> </span>boto3<span class="op">$</span><span class="kw">Session</span>(<span class="dt">region_name =</span> <span class="st">'us-west-2'</span>)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">my_custom_s3_client2 &lt;-<span class="st"> </span>my_custom_session2<span class="op">$</span><span class="kw">client</span>(<span class="st">'s3'</span>)</a></code></pre></div>
</div>
<div id="using-the-raw-boto3-module" class="section level2">
<h2 class="hasAnchor">
<a href="#using-the-raw-boto3-module" class="anchor"></a>Using the raw <code>boto3</code> module</h2>
<p>The <code>botor</code> package provides the <code>boto3</code> object with full access to the <code>boto3</code> Python SDK. Quick example on listing all S3 buckets:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(botor)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">s3 &lt;-<span class="st"> </span>boto3<span class="op">$</span><span class="kw">resource</span>(<span class="st">'s3'</span>)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(reticulate)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/reticulate/topics/iterate">iter_next</a></span>(s3<span class="op">$</span>buckets<span class="op">$</span><span class="kw">pages</span>())</a></code></pre></div>
<p>Note that this approach requires a stable understanding of the <code>boto3</code> Python module, plus a decent familiarity with <code>reticulate</code> as well (see eg <code>iter_next</code>) – so you might want to rather consider using the helper functions described below.</p>
</div>
<div id="using-the-default-botor-session" class="section level2">
<h2 class="hasAnchor">
<a href="#using-the-default-botor-session" class="anchor"></a>Using the default <code>botor</code> session</h2>
<p>Calling <code><a href="reference/botor.html">botor()</a></code> will provide you a default <code>boto3</code> session that is cached internally. You can always override the default session by calling <code><a href="reference/botor.html">botor()</a></code> again with new arguments. See eg setting the default <code>boto3</code> session to use <code>us-west-2</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="reference/botor.html">botor</a></span>(<span class="dt">region_name =</span> <span class="st">'us-west-2'</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw"><a href="reference/botor.html">botor</a></span>()<span class="op">$</span><span class="kw">resource</span>(<span class="st">'s3'</span>)</a></code></pre></div>
<p>A great advantage of using <code><a href="reference/botor.html">botor()</a></code> instead of custom sessions is that it’s fork-safe. See eg:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/attr">attr</a></span>(<span class="kw"><a href="reference/botor.html">botor</a></span>(), <span class="st">'pid'</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; [1] 31225</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/attr">attr</a></span>(<span class="kw"><a href="reference/botor.html">botor</a></span>(), <span class="st">'pid'</span>)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt; [1] 31225</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="cf">function</span>(i) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/attr">attr</a></span>(<span class="kw"><a href="reference/botor.html">botor</a></span>(), <span class="st">'pid'</span>))</a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; [1] 31225</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt;</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt; [1] 31225</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="kw">mclapply</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="cf">function</span>(i) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/attr">attr</a></span>(<span class="kw"><a href="reference/botor.html">botor</a></span>(), <span class="st">'pid'</span>), <span class="dt">mc.cores =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt; [1] 13209</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt; [1] 13210</span></a></code></pre></div>
</div>
<div id="convenient-helper-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#convenient-helper-functions" class="anchor"></a>Convenient helper functions</h2>
<p>Besides the <code>botor</code> pre-initialized default Boto3 session, the package also provides some further R helper functions for the most common AWS actions, like interacting with S3 or KMS. Note, that the list of these functions is pretty limited for now, but you can always fall back to the raw Boto3 functions if needed. PRs on new helper functions are appreciated :)</p>
<p>Examples:</p>
<ol>
<li>
<p>Listing all S3 buckets takes some time as it will first initialize the S3 Boto3 client in the background:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.time">system.time</a></span>(<span class="kw"><a href="reference/s3_list_buckets.html">s3_list_buckets</a></span>())[[<span class="st">'elapsed'</span>]]</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt; [1] 1.426</span></a></code></pre></div>
</li>
<li>
<p>But the second query is much faster as reusing the same <code>s3</code> Boto3 resource:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.time">system.time</a></span>(<span class="kw"><a href="reference/s3_list_buckets.html">s3_list_buckets</a></span>())[[<span class="st">'elapsed'</span>]]</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt; [1] 0.323</span></a></code></pre></div>
</li>
<li>
<p>Unfortunately, sharing the same Boto3 resource between (forked) processes is not ideal, so <code>botor</code> will take care of that by spawning new resources in the forked threads:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(parallel)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">simplify2array</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/parallel/topics/mclapply">mclapply</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="cf">function</span>(i) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.time">system.time</a></span>(<span class="kw"><a href="reference/s3_list_buckets.html">s3_list_buckets</a></span>())[[<span class="st">'elapsed'</span>]], <span class="dt">mc.cores =</span> <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt; [1] 1.359 1.356 0.406 0.397</span></a></code></pre></div>
</li>
<li>
<p>Want to speed it up more?</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(memoise)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">s3_list_buckets &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/memoise/topics/memoise">memoise</a></span>(s3_list_buckets)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">simplify2array</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/parallel/topics/mclapply">mclapply</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="cf">function</span>(i) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.time">system.time</a></span>(<span class="kw"><a href="reference/s3_list_buckets.html">s3_list_buckets</a></span>())[[<span class="st">'elapsed'</span>]], <span class="dt">mc.cores =</span> <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">#&gt; [1] 1.330 1.332 0.000 0.000</span></a></code></pre></div>
</li>
</ol>
<p>The currently supported resources and features via helper functions: <a href="https://daroczig.github.io/botor/reference/index.html" class="uri">https://daroczig.github.io/botor/reference/index.html</a></p>
</div>
<div id="error-handling" class="section level2">
<h2 class="hasAnchor">
<a href="#error-handling" class="anchor"></a>Error handling</h2>
<p>The convenient helper functions try to suppress the boring Python traceback and provide you only the most relevant information on the error. If you want to see the full tracelog and more details after an error, call <code><a href="https://www.rdocumentation.org/packages/reticulate/topics/py_last_error">reticulate::py_last_error()</a></code>. When working with the raw <code>boto3</code> wrapper, you may find <code>botor:::trypy</code> useful as well.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw"><a href="reference/s3_download_file.html">s3_download_file</a></span>(<span class="st">'s3://bottttor/example-data/mtcars.csv'</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempfile</a></span>())</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="co">#&gt; Error in s3_download_file("s3://bottttor/example-data/mtcars.csv", tempfile()) : </span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">#&gt;   Python `ClientError`: An error occurred (404) when calling the HeadObject operation: Not Found</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="kw"><a href="reference/s3_read.html">s3_read</a></span>(<span class="st">'s3://botor/example-data/mtcars2.csv'</span>, read.csv)</a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt; Error in s3_download(object, t) : </span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt;   Python `ClientError`: An error occurred (403) when calling the HeadObject operation: Forbidden</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="kw"><a href="reference/botor.html">botor</a></span>(<span class="dt">region_name =</span> <span class="st">'us-west-2'</span>)</a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="kw"><a href="reference/s3_read.html">s3_read</a></span>(<span class="st">'s3://botor/example-data/mtcars.csv'</span>, read.csv)</a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">#&gt;     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="co">#&gt; 1  21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4</span></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="co">#&gt; 2  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4</span></a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="co">#&gt; ...</span></a></code></pre></div>
</div>
<div id="logging" class="section level2">
<h2 class="hasAnchor">
<a href="#logging" class="anchor"></a>Logging</h2>
<p><code>botor</code> uses the <a href="https://daroczig.github.io/logger"><code>logger</code></a> package to write log messages to the console by default with the following log level standards:</p>
<ul>
<li>
<code>TRACE</code> start of an AWS query (eg just about to start listing all S3 buckets in an AWS account)</li>
<li>
<code>DEBUG</code> summary on the result of an AWS query (eg number of S3 buckets found in an AWS account)</li>
<li>
<code>INFO</code> currently not used</li>
<li>
<code>WARN</code> currently not used</li>
<li>
<code>ERROR</code> something bad happened and logging extra context besides what’s being returned in the error message</li>
<li>
<code>FATAL</code> currently not used</li>
</ul>
<p>The default log level threshold set to <code>DEBUG</code>. If you want to update that, use the package name for the <code>namespace</code> argument of <code>log_threshold</code> from the <code>logger</code> package, eg to enable all log messages:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(logger)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/logger/topics/log_threshold">log_threshold</a></span>(TRACE, <span class="dt">namespace =</span> <span class="st">'botor'</span>)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="kw"><a href="reference/s3_download_file.html">s3_download_file</a></span>(<span class="st">'s3://botor/example-data/mtcars.csv'</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempfile</a></span>())</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co">#&gt; TRACE [2019-01-11 14:48:07] Downloading s3://botor/example-data/mtcars.csv to '/tmp/RtmpCPNrOk/file6fac556567d4' ...</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">#&gt; DEBUG [2019-01-11 14:48:09] Downloaded 1303 bytes from s3://botor/example-data/mtcars.csv and saved at '/tmp/RtmpCPNrOk/file6fac556567d4'</span></a></code></pre></div>
<p>Or update to not fire the less important messages than warnings:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(logger)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/logger/topics/log_threshold">log_threshold</a></span>(WARN, <span class="dt">namespace =</span> <span class="st">'botor'</span>)</a></code></pre></div>
<p>You can use the same approach to set custom (or more than one) log appenders, eg writing the log messages to files, a database etc – check the <code>logger</code> docs for more details.</p>
</div>
<div id="why-the-name" class="section level2">
<h2 class="hasAnchor">
<a href="#why-the-name" class="anchor"></a>Why the name?</h2>
<p><code>botor</code> means “goofy” in Hungarian. This is how I feel when looking back to all the dev hours spent on integrating the AWS Java SDK in R – this includes <code>AWR.KMS</code>, where I ended up debugging and fixing many issues in forked processes, but <code>AWR.Kinesis</code> still rocks :)</p>
<p>The name also reminds you that it’s not exactly <code>boto3</code>, as eg you have to use <code>$</code> instead of <code>.</code> to access methods.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/daroczig/botor">https://​github.com/​daroczig/​botor</a>
</li>
<li>Report a bug at <br><a href="https://github.com/daroczig/botor/issues">https://​github.com/​daroczig/​botor/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Gergely Daróczi <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3149-8537" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
<li>
<a href="https://system1.com"><img src="http://system1.com/static/svg/logo.svg" height="24"></a> <br><small class="roles"> Funder </small>  </li>
</ul>
</div>

  </div>
</div>

      <footer><div class="copyright">
  <p>Developed by Gergely Daróczi, <a href="https://system1.com"><img src="http://system1.com/static/svg/logo.svg" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
